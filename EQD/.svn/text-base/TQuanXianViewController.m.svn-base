//
//  TQuanXianViewController.m
//  EQD
//
//  Created by 梁新帅 on 2017/5/3.
//  Copyright © 2017年 FitBoy. All rights reserved.
//

#import "TQuanXianViewController.h"
#import "FBTextField.h"
#import <RongIMKit/RongIMKit.h>
@interface TQuanXianViewController ()<UITextFieldDelegate>
{
    FBTextField *TF_zhanghao;
    ComModel *com;
}

@end

@implementation TQuanXianViewController

- (void)viewDidLoad {
    [super viewDidLoad];
    self.automaticallyAdjustsScrollViewInsets = NO;
    com =[WebRequest getCompanyInfo];
    self.navigationItem.title =[NSString stringWithFormat:@"请设置%@的企业董事长",com.comname];
    TF_zhanghao = [[FBTextField alloc]initWithFrame:CGRectMake(15, 80, DEVICE_WIDTH-30, 45)];
    [self.view addSubview:TF_zhanghao];
    TF_zhanghao.placeholder =@"请输入董事长的手机号或者易企点号";
    
    TF_zhanghao.returnKeyType =UIReturnKeyDone;
    [TF_zhanghao becomeFirstResponder];
    TF_zhanghao.delegate =self;
    TF_zhanghao.keyboardType =UIKeyboardTypeEmailAddress;
    
    UILabel *tlabel =[[UILabel alloc]init];
    [self.view addSubview:tlabel];
    NSString *tishi = @"1.我们只认您是本公司的负责人，请先设置企业董事长作为本公司的最高领导人，\n2.然后让董事长在 人事-->组织架构设置-->增加一个人事的部门，\n3.接着到 人事-->员工档案管理-->人员邀请 来邀请一个人事来管理公司的人事。 ";
    CGSize size = [tishi boundingRectWithSize:CGSizeMake(DEVICE_WIDTH-30, MAXFLOAT) options:NSStringDrawingUsesLineFragmentOrigin attributes:@{NSFontAttributeName:[UIFont systemFontOfSize:13],NSForegroundColorAttributeName:[UIColor redColor]} context:nil].size;
    tlabel.frame = CGRectMake(15, 130, DEVICE_WIDTH-30, size.height);
    tlabel.font=[UIFont systemFontOfSize:13];
    tlabel.text =tishi;
    tlabel.numberOfLines=0;
    tlabel.textColor=[UIColor grayColor];
    
    
}

-(void)textFieldDidEndEditing:(UITextField *)textField
{
    
}

- (BOOL)textFieldShouldReturn:(UITextField *)textField
{
    [self setDone];
    
    [self.view endEditing:YES];
    
    return YES;
}

-(void)setDone
{
    if (TF_zhanghao.text.length==0) {
        MBProgressHUD *hud=[MBProgressHUD showHUDAddedTo:self.view  animated:YES];
        hud.mode = MBProgressHUDModeText;
        hud.label.text =@"内容不能为空";
        dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, 1 * NSEC_PER_SEC);
        dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
            [MBProgressHUD hideHUDForView:self.view  animated:YES];
        });
    }
    else
    {
        
//        [RCKitUtility validateCellPhoneNumber:TF_zhanghao.text];
       [WebRequest Com_AffirmBossbossid:TF_zhanghao.text cid:com.comid And:^(NSDictionary *dic) {
           if ([dic[Y_STATUS] integerValue]==200) {
               
           }
           else
           {
               MBProgressHUD *hud=[MBProgressHUD showHUDAddedTo:self.view  animated:YES];
               hud.mode = MBProgressHUDModeText;
               hud.label.text =dic[Y_MSG];
               dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, 1 * NSEC_PER_SEC);
               dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
                   [MBProgressHUD hideHUDForView:self.view  animated:YES];
               });
           }
       }];
        
    }
}

@end
