//
//  YGShanXuanViewController.m
//  EQD
//
//  Created by 梁新帅 on 2017/4/20.
//  Copyright © 2017年 FitBoy. All rights reserved.
//

#import "YGShanXuanViewController.h"

@interface YGShanXuanViewController ()<UITableViewDelegate,UITableViewDataSource>
{
    UITableView *tableV;
    NSMutableArray *arr_one;
    NSMutableArray *tarr;
    NSString *str_one;
    NSString *str_two;
    UIDatePicker *picker_one;
    UIDatePicker *picker_two;
}

@end

@implementation YGShanXuanViewController

- (void)viewDidLoad {
    [super viewDidLoad];
    tarr=[NSMutableArray arrayWithArray:@[@"11",@"21",@"31",@"41"]];
    arr_one = [NSMutableArray arrayWithArray:@[@"选择部门",@"开始",@"结束",@"筛选某个时间段内入职的员工"]];
    
    tableV = [[UITableView alloc]initWithFrame:self.view.frame style:UITableViewStylePlain];
    tableV.delegate=self;
    tableV.dataSource=self;
    [self.view addSubview:tableV];
    self.view.backgroundColor =[UIColor grayColor];
    NSDateFormatter *formatter = [[NSDateFormatter alloc]init];
    [formatter setDateFormat:@"yyyy-MM-dd"];
   
    
    picker_one = [[UIDatePicker alloc]initWithFrame:CGRectMake(0, 0, DEVICE_WIDTH*0.6, 120)];
    picker_two =[[UIDatePicker alloc]initWithFrame:CGRectMake(0, 0, DEVICE_WIDTH*0.6, 120)];
    picker_one.datePickerMode = UIDatePickerModeDate;
    picker_two.datePickerMode = UIDatePickerModeDate;
    if (str_one==nil || str_two ==nil) {
        [picker_one setDate:[NSDate date]];
        [picker_two setDate:[NSDate date]];
    }
    else
    {
        NSDate *date1 =[formatter dateFromString:str_one];
        NSDate *date2 =[formatter dateFromString:str_two];
        [picker_one setDate:date1];
        [picker_two setDate:date2];
    }
}
#pragma  mark - 表的数据源
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return arr_one.count;
}
-(UITableViewCell*)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    static NSString *cellId=@"cellID";
    UITableViewCell *cell =[tableView dequeueReusableCellWithIdentifier:cellId];
    if (!cell) {
        cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellId];
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    }
    cell.textLabel.text =arr_one[indexPath.row];
    NSString *str =arr_one[indexPath.row];
    if ([str isEqualToString:@"1"]) {
        [cell addSubview:picker_one];
        [picker_two removeFromSuperview];
    }
    if ([str isEqualToString:@"2"]) {
        [cell addSubview:picker_two];
        [picker_one removeFromSuperview];
    }
    return cell;
}

#pragma  mark - 表的协议代理
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    NSString *str = arr_one[indexPath.row];
    if ([str isEqualToString:@"开始"]) {
        [arr_one insertObject:@"1" atIndex:indexPath.row+1];
        [tableV reloadData];
    }
    if ([str isEqualToString:@"结束"]) {
        [arr_one insertObject:@"2" atIndex:indexPath.row+1];
        [tableV reloadData];
    }
    if ([str isEqualToString:@"选择部门"]) {
        [arr_one insertObjects:tarr atIndexes:[NSIndexSet indexSetWithIndexesInRange:NSMakeRange(indexPath.row+1, indexPath.row+tarr.count)]];
        [tableV reloadData];
    }
}

-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *str = arr_one[indexPath.row];
    if ([str isEqualToString:@"1"] || [str isEqualToString:@"2"]) {
        return 120;
    }
    return 50;
}



@end
