//
//  FBFourViewController.m
//  EQD
//
//  Created by 梁新帅 on 2017/3/20.
//  Copyright © 2017年 FitBoy. All rights reserved.
//
#define Image_height  150
#import "FBFourViewController.h"
#import "WebRequest.h"
#import "TFAQViewController.h"
#import "FBScrollView.h"
@interface FBFourViewController ()<UITableViewDelegate,UITableViewDataSource>
{
    UITableView *tableV;
    NSMutableArray *arr_all;
    dispatch_source_t  timer;
    FBScrollView *scrollView;
}


@end

@implementation FBFourViewController

- (void)viewDidLoad {
    [super viewDidLoad];
    self.navigationItem.title = @"功能列表";
    
    self.automaticallyAdjustsScrollViewInsets=NO;
    UIButton *shengyingBtn =[UIButton buttonWithType:UIButtonTypeSystem];
    shengyingBtn.frame =CGRectMake(0,64, 25, 25);
    [shengyingBtn setBackgroundColor:[UIColor whiteColor]];
    [shengyingBtn setBackgroundImage:[UIImage imageNamed:@"voice"] forState:UIControlStateNormal];
    
    __block UILabel *titleLabel1 =[[UILabel alloc]initWithFrame:CGRectMake(30, 64, 352, 25)];
    titleLabel1.font =[UIFont systemFontOfSize:15];
    titleLabel1.textColor = [UIColor redColor];
    titleLabel1.text =@"公司立足郑州，面向全国，以饱满的热情努力工作，";
    titleLabel1.textAlignment=NSTextAlignmentCenter;
    __block  UILabel *titleLabel2 =[[UILabel alloc]initWithFrame:CGRectMake(380, 64, 390, 25)];
    titleLabel2.font =[UIFont systemFontOfSize:15];
    titleLabel2.textColor = [UIColor redColor];
    titleLabel2.text =@"为您的企业持续发展和快速转型注入我们自己的一份力量";
    titleLabel2.textAlignment=NSTextAlignmentCenter;
    
    [self.view addSubview:titleLabel1];
    [self.view addSubview:titleLabel2];
    
    [self.view addSubview:shengyingBtn];
    __block NSInteger total =400;
    //全局并发队列
    dispatch_queue_t globalQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
    //主队列；属于串行队列
    dispatch_queue_t mainQueue = dispatch_get_main_queue();
    //定时循环执行事件
    timer = dispatch_source_create(DISPATCH_SOURCE_TYPE_TIMER, 0, 0, globalQueue);
    dispatch_source_set_timer(timer, DISPATCH_TIME_NOW, 0.1 * NSEC_PER_SEC, 0.0 * NSEC_PER_SEC);
    dispatch_source_set_event_handler(timer, ^{
        if (total<0) {
            dispatch_source_cancel(timer);
        }
        else
        {
            [[NSRunLoop mainRunLoop]run];
            dispatch_async(mainQueue, ^{
                CGRect rect1 =titleLabel1.frame;
                CGRect rect2 =titleLabel2.frame;
                rect1.origin.x=rect1.origin.x-2;
                rect2.origin.x=rect2.origin.x-2;
                if (rect1.origin.x<-320) {
                    rect1.origin.x = 385+30;
                }
                if (rect2.origin.x<-352) {
                    rect2.origin.x=352+30;
                }
                titleLabel1.frame = rect1;
                titleLabel2.frame =rect2;
            });
        }
    });
    dispatch_source_set_cancel_handler(timer, ^{
        NSLog(@"Cancel Handler");
    });
    dispatch_resume(timer);
    
    //滚动图
    scrollView =[[FBScrollView alloc]initWithFrame:CGRectMake(0, 25+64, DEVICE_WIDTH, Image_height) imgs:@[@"EQD1",@"EQD2",@"EQD3",@"EQD4",@"EQD5"]];
//    [self.view addSubview:scrollView];

    
    UIBarButtonItem *right =[[UIBarButtonItem alloc]initWithImage:[[UIImage imageNamed:@"add_eqd2"] imageWithRenderingMode:UIImageRenderingModeAlwaysOriginal] style:UIBarButtonItemStylePlain target:self action:@selector(kuaijiefangshi)];
    [self.navigationItem setRightBarButtonItem:right];
    arr_all =[NSMutableArray arrayWithArray:@[@[@"gongzuo.png",@"工作圈"],@[@"qiye.png",@"企业空间"],@[@"ggao.png",@"公告"],@[@"peixuns.png",@"企业商学院"],@[@"kech.png",@"企业看板"],@[@"rongyuqiang.png",@"荣誉墙"],@[@"lejuandan.png",@"乐捐单"],@[@"jifen.png",@"积分榜"],@[@"gere.png",@"驾驶舱"]]];
    tableV = [[UITableView alloc]initWithFrame:CGRectMake(0,25+64, DEVICE_WIDTH, DEVICE_HEIGHT-64-25-50) style:UITableViewStylePlain];
    tableV.delegate=self;
    tableV.dataSource=self;
    [self.view addSubview:tableV];
    tableV.rowHeight=60;
    tableV.tableHeaderView =scrollView;
}
#pragma  mark - 表的数据源
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return arr_all.count;
}
-(UITableViewCell*)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    static NSString *cellId=@"cellID";
    UITableViewCell *cell =[tableView dequeueReusableCellWithIdentifier:cellId];
    if (!cell) {
        cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellId];
        cell.accessoryType=UITableViewCellAccessoryDisclosureIndicator;
    }
    NSArray *arr =arr_all[indexPath.row];
    cell.imageView.image=[UIImage imageNamed:arr[0]];
    cell.textLabel.text=arr[1];
    
    return cell;
}

#pragma  mark - 表的协议代理
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    switch (indexPath.row) {
        case 0:
        {
            NSLog(@"工作圈");
            
            
        }
            break;
        case 1:
        {
            NSLog(@"企业空间");
        }
            break;
        case 2:
        {
            NSLog(@"公告");
        }
            break;
        case 3:
        {
            NSLog(@"企业商学院");
        }
            break;
        case 4:
        {
            NSLog(@"企业看板");
        }
            break;
        case 5:
        {
            NSLog(@"荣誉墙");
        }
            break;
        case 6:
        {
            NSLog(@"乐捐单");
        }
            break;
        case 7:
        {
            NSLog(@"积分榜");
        }
            break;
        case 8:
        {
            NSLog(@"驾驶舱");
        }
            break;
            
        default:
            break;
    }
}


@end
