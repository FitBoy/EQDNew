//
//  LDHTFaQiViewController.m
//  EQD
//
//  Created by 梁新帅 on 2017/6/7.
//  Copyright © 2017年 FitBoy. All rights reserved.
//

#import "LDHTFaQiViewController.h"
#import "FBTimeDayViewController.h"
#import "FBTextFieldViewController.h"
#import "FBTextVViewController.h"
#import "FBButton.h"
@interface LDHTFaQiViewController ()<UITableViewDataSource,UITableViewDelegate,FBTimeDayViewControllerDelegate,FBTextFieldViewControllerDelegate,FBTextVViewControllerDelegate>
{
    UITableView *tableV;
    NSMutableArray *arr_names;
    NSDictionary  *dic10;
    NSDictionary  *dic11;
    NSDictionary  *dic12;
}

@end

@implementation LDHTFaQiViewController

- (void)viewDidLoad {
    [super viewDidLoad];
    self.navigationItem.title =@"发起劳动合同";
    arr_names =[NSMutableArray arrayWithArray:@[
  @{@"name":@"签订人",@"code":@"0",@"content":@"请输入"},
  @{@"name":@"所在部门",@"code":@"1",@"content":@""},
 @{@"name":@"所在岗位",@"code":@"2",@"content":@""},
  @{@"name":@"入职时间",@"code":@"3",@"content":@""},
  @{@"name":@"合同类型",@"code":@"4",@"content":@"请选择"},
  @{@"name":@"合同性质",@"code":@"5",@"content":@"请选择"},
  @{@"name":@"合同签订次数",@"code":@"6",@"content":@" "},
  @{@"name":@"合同开始时间",@"code":@"7",@"content":@"请选择"},
  @{@"name":@"合同结束时间",@"code":@"8",@"content":@"请选择"},
  @{@"name":@"工资发放银行",@"code":@"9",@"content":@"请输入"}
  ]];
   dic10=@{@"name":@"劳动合同形式",@"code":@"10",@"content":@"请选择"};
    
    dic11 =@{@"name":@"试用期(月)",@"code":@"11",@"content":@"请输入"};
    dic12 =@{@"name":@"上次合同结束原因",@"code":@"12",@"content":@"请输入"};
    
    tableV = [[UITableView alloc]initWithFrame:CGRectMake(0, 0, DEVICE_WIDTH, DEVICE_HEIGHT) style:UITableViewStylePlain];
    tableV.delegate=self;
    tableV.dataSource=self;
    [self.view addSubview:tableV];
    tableV.rowHeight=50;
    UIBarButtonItem *right = [[UIBarButtonItem alloc]initWithTitle:@"发送" style:UIBarButtonItemStylePlain target:self action:@selector(fasongClick)];
    [self.navigationItem setRightBarButtonItem:right];
    
}
#pragma  mark - 表的数据源
-(CGFloat)tableView:(UITableView *)tableView heightForFooterInSection:(NSInteger)section
{
    return 40;
}
-(UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section
{
    FBButton *tbtn = [FBButton buttonWithType:UIButtonTypeSystem];
    [tbtn setTitle:@"发 送" titleColor:[UIColor whiteColor] backgroundColor:EQDCOLOR font:[UIFont systemFontOfSize:24]];
    [tbtn addTarget:self action:@selector(fasongClick) forControlEvents:UIControlEventTouchUpInside];
    
    return tbtn;
}
-(void)fasongClick
{
    //发送劳动合同
    
}
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return arr_names.count;
}
-(UITableViewCell*)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    static NSString *cellId=@"cellID";
    UITableViewCell *cell =[tableView dequeueReusableCellWithIdentifier:cellId];
    if (!cell) {
        cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:cellId];
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
        cell.textLabel.font = [UIFont systemFontOfSize:18];
    }
    NSDictionary *dic = arr_names[indexPath.row];
    cell.textLabel.text =dic[@"name"];
    cell.detailTextLabel.text =dic[@"content"];
    return cell;
}

#pragma  mark - 表的协议代理
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSDictionary *dic = arr_names[indexPath.row];
    switch ([dic[@"code"] integerValue]) {
        case 0:
        {
            //签订人
        }
            break;
        case 4:
        {
           //合同类型
            UIAlertController *alert = [[UIAlertController alloc]init];
            [alert addAction:[UIAlertAction actionWithTitle:@"劳动合同" style:UIAlertActionStyleDefault handler:^(UIAlertAction * _Nonnull action) {
                NSMutableDictionary *dic1 =[NSMutableDictionary dictionaryWithDictionary:dic];
               [ dic1 setValue:action.title forKey:@"content"];
                [arr_names replaceObjectAtIndex:indexPath.row withObject:dic1];
                [arr_names removeObject:dic10];
                [arr_names removeObject:dic11];
                    [arr_names  insertObject:dic10 atIndex:indexPath.row+1];
                    [arr_names insertObject:dic11 atIndex:indexPath.row+2];
                    [tableV reloadData];
            }]];
            [alert addAction:[UIAlertAction actionWithTitle:@"保密协议" style:UIAlertActionStyleDefault handler:^(UIAlertAction * _Nonnull action) {
                NSMutableDictionary *dic1 =[NSMutableDictionary dictionaryWithDictionary:dic];
                [ dic1 setValue:action.title forKey:@"content"];
                 [arr_names replaceObjectAtIndex:indexPath.row withObject:dic1];
                [arr_names removeObject:dic10];
                [arr_names removeObject:dic11];
                
                [tableV reloadData];
            }]];
            [alert addAction:[UIAlertAction actionWithTitle:@"竞业禁止协议" style:UIAlertActionStyleDefault handler:^(UIAlertAction * _Nonnull action) {
                NSMutableDictionary *dic1 =[NSMutableDictionary dictionaryWithDictionary:dic];
                [ dic1 setValue:action.title forKey:@"content"];
                 [arr_names replaceObjectAtIndex:indexPath.row withObject:dic1];
                [arr_names removeObject:dic10];
                [arr_names removeObject:dic11];

                [tableV reloadData];
            }]];
            [alert addAction:[UIAlertAction actionWithTitle:@"培训协议" style:UIAlertActionStyleDefault handler:^(UIAlertAction * _Nonnull action) {
                NSMutableDictionary *dic1 =[NSMutableDictionary dictionaryWithDictionary:dic];
                [ dic1 setValue:action.title forKey:@"content"];
                 [arr_names replaceObjectAtIndex:indexPath.row withObject:dic1];
                [arr_names removeObject:dic10];
                [arr_names removeObject:dic11];

                [tableV reloadData];
            }]];
            [alert addAction:[UIAlertAction actionWithTitle:@"其他" style:UIAlertActionStyleDefault handler:^(UIAlertAction * _Nonnull action) {
                NSMutableDictionary *dic1 =[NSMutableDictionary dictionaryWithDictionary:dic];
                [ dic1 setValue:action.title forKey:@"content"];
                 [arr_names replaceObjectAtIndex:indexPath.row withObject:dic1];
                [arr_names removeObject:dic10];
                [arr_names removeObject:dic11];

                [tableV reloadData];
            }]];
            [self presentViewController:alert animated:NO completion:nil];
            
        }
            break;
        case 5:
        {
           //合同性质
            UIAlertController *alert = [[UIAlertController alloc]init];
            [alert addAction:[UIAlertAction actionWithTitle:@"新签" style:UIAlertActionStyleDefault handler:^(UIAlertAction * _Nonnull action) {
                NSMutableDictionary *dic1 = [NSMutableDictionary dictionaryWithDictionary:dic];
                [dic1 setValue:action.title forKey:@"content"];
                [arr_names replaceObjectAtIndex:indexPath.row withObject:dic1];
                [tableV reloadData];
                
            }]];
            [alert addAction:[UIAlertAction actionWithTitle:@"续签" style:UIAlertActionStyleDefault handler:^(UIAlertAction * _Nonnull action) {
                NSMutableDictionary *dic1 = [NSMutableDictionary dictionaryWithDictionary:dic];
                [dic1 setValue:action.title forKey:@"content"];
                [arr_names replaceObjectAtIndex:indexPath.row withObject:dic1];
                [tableV reloadData];
            }]];
            [alert addAction:[UIAlertAction actionWithTitle:@"变更" style:UIAlertActionStyleDefault handler:^(UIAlertAction * _Nonnull action) {
                NSMutableDictionary *dic1 = [NSMutableDictionary dictionaryWithDictionary:dic];
                [dic1 setValue:action.title forKey:@"content"];
                [arr_names replaceObjectAtIndex:indexPath.row withObject:dic1];
                [tableV reloadData];
            }]];
            [self presentViewController:alert animated:NO completion:nil];
            
        }
            break;
        case 6:
        {
            //合同签订次数
            UIAlertController *alert = [[UIAlertController alloc]init];
            [alert addAction:[UIAlertAction actionWithTitle:@"新签" style:UIAlertActionStyleDefault handler:^(UIAlertAction * _Nonnull action) {
                NSMutableDictionary *dic1 = [NSMutableDictionary dictionaryWithDictionary:dic];
                [dic1 setValue:action.title forKey:@"content"];
                [arr_names replaceObjectAtIndex:indexPath.row withObject:dic1];
                 [arr_names removeObject:dic12];
                [tableV reloadData];
                
            }]];
            [alert addAction:[UIAlertAction actionWithTitle:@"第二次签" style:UIAlertActionStyleDefault handler:^(UIAlertAction * _Nonnull action) {
                NSMutableDictionary *dic1 = [NSMutableDictionary dictionaryWithDictionary:dic];
                [dic1 setValue:action.title forKey:@"content"];
                [arr_names replaceObjectAtIndex:indexPath.row withObject:dic1];
                [arr_names removeObject:dic12];
                [arr_names insertObject:dic12 atIndex:indexPath.row+1];
                [tableV reloadData];
            }]];
            [alert addAction:[UIAlertAction actionWithTitle:@"第三次签" style:UIAlertActionStyleDefault handler:^(UIAlertAction * _Nonnull action) {
                NSMutableDictionary *dic1 = [NSMutableDictionary dictionaryWithDictionary:dic];
                [dic1 setValue:action.title forKey:@"content"];
                [arr_names replaceObjectAtIndex:indexPath.row withObject:dic1];
                [arr_names removeObject:dic12];
                [arr_names insertObject:dic12 atIndex:indexPath.row+1];
                [tableV reloadData];
            }]];
            [self presentViewController:alert animated:NO completion:nil];
        }
            break;
        case 7:
        {
           //合同开始时间
            FBTimeDayViewController *TDvc =[[FBTimeDayViewController alloc]init];
            TDvc.delegate =self;
            TDvc.indexPath =indexPath;
            TDvc.contentTitle =dic[@"name"];
            [self.navigationController pushViewController:TDvc animated:NO];
        }
            break;
        case 8:
        {
          //合同结束时间
            FBTimeDayViewController *TDvc =[[FBTimeDayViewController alloc]init];
            TDvc.delegate =self;
            TDvc.indexPath =indexPath;
            TDvc.contentTitle =dic[@"name"];
            [self.navigationController pushViewController:TDvc animated:NO];
        }
            break;
        case 9:
        {
            //工资发放银行
            FBTextFieldViewController *TFvc =[[FBTextFieldViewController alloc]init];
            TFvc.delegate =self;
            TFvc.indexPath=indexPath;
            TFvc.contentTitle =dic[@"name"];
            TFvc.content =dic[@"content"];
            [self.navigationController pushViewController:TFvc animated:NO];
            
        }
            break;
            case 10:
        {
            //劳动合同形式
            UIAlertController *alert = [[UIAlertController alloc]init];
            [alert addAction:[UIAlertAction actionWithTitle:@"固定期" style:UIAlertActionStyleDefault handler:^(UIAlertAction * _Nonnull action) {
                 NSMutableDictionary *dic1 = [NSMutableDictionary dictionaryWithDictionary:dic];
                [dic1 setValue:action.title forKey:@"content"];
                [arr_names replaceObjectAtIndex:indexPath.row withObject:dic1];
                [tableV reloadData];
            }]];
            [alert addAction:[UIAlertAction actionWithTitle:@"无固定期" style:UIAlertActionStyleDefault handler:^(UIAlertAction * _Nonnull action) {
                NSMutableDictionary *dic1 = [NSMutableDictionary dictionaryWithDictionary:dic];
                [dic1 setValue:action.title forKey:@"content"];
                [arr_names replaceObjectAtIndex:indexPath.row withObject:dic1];
                [tableV reloadData];
            }]];
            [alert addAction:[UIAlertAction actionWithTitle:@"临时工" style:UIAlertActionStyleDefault handler:^(UIAlertAction * _Nonnull action) {
                NSMutableDictionary *dic1 = [NSMutableDictionary dictionaryWithDictionary:dic];
                [dic1 setValue:action.title forKey:@"content"];
                [arr_names replaceObjectAtIndex:indexPath.row withObject:dic1];
                [tableV reloadData];
            }]];
            [alert addAction:[UIAlertAction actionWithTitle:@"劳务派遣" style:UIAlertActionStyleDefault handler:^(UIAlertAction * _Nonnull action) {
                NSMutableDictionary *dic1 = [NSMutableDictionary dictionaryWithDictionary:dic];
                [dic1 setValue:action.title forKey:@"content"];
                [arr_names replaceObjectAtIndex:indexPath.row withObject:dic1];
                [tableV reloadData];
            }]];
            
            [self presentViewController:alert animated:NO completion:nil];
            
        }
            break;
            case 11:
        {
            //试用期（月）
            FBTextFieldViewController *TFvc =[[FBTextFieldViewController alloc]init];
            TFvc.delegate =self;
            TFvc.indexPath =indexPath;
            TFvc.contentTitle =dic[@"name"];
            TFvc.content =dic[@"content"];
            [self.navigationController pushViewController:TFvc animated:NO];
            
        }
            break;
            case 12:
        {
            //上次合同结束原因
            FBTextVViewController *TVvc =[[FBTextVViewController alloc]init];
            TVvc.delegate =self;
            TVvc.indexpath =indexPath;
            TVvc.contentTitle =dic[@"name"];
            TVvc.content =dic[@"content"];
            [self.navigationController pushViewController:TVvc animated:NO];
            
        }
            break;
        default:
            break;
    }
}
#pragma mark - 自定义的协议代理
-(void)content:(NSString *)content WithindexPath:(NSIndexPath *)indexPath
{
    NSDictionary *dic=arr_names[indexPath.row];
    NSMutableDictionary *dic1 = [NSMutableDictionary dictionaryWithDictionary:dic];
    [dic1 setValue:content forKey:@"content"];
    [arr_names replaceObjectAtIndex:indexPath.row withObject:dic1];
    [tableV reloadData];
}
-(void)timeDay:(NSString *)time indexPath:(NSIndexPath *)indexPath
{
    NSDictionary *dic=arr_names[indexPath.row];
    NSMutableDictionary *dic1 = [NSMutableDictionary dictionaryWithDictionary:dic];
    [dic1 setValue:time forKey:@"content"];
    [arr_names replaceObjectAtIndex:indexPath.row withObject:dic1];
    [tableV reloadData];

}
-(void)textVtext:(NSString *)text indexPath:(NSIndexPath *)indexPath
{
    NSDictionary *dic=arr_names[indexPath.row];
    NSMutableDictionary *dic1 = [NSMutableDictionary dictionaryWithDictionary:dic];
    [dic1 setValue:text forKey:@"content"];
    [arr_names replaceObjectAtIndex:indexPath.row withObject:dic1];
    [tableV reloadData];
}

@end
