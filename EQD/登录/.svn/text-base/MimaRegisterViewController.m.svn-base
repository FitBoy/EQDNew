//
//  MimaRegisterViewController.m
//  YiQiDian
//
//  Created by 梁新帅 on 2017/3/10.
//  Copyright © 2017年 FitBoy. All rights reserved.
//

#import "MimaRegisterViewController.h"
#import "EQDLoginViewController.h"
#import "WebRequest.h"
@interface MimaRegisterViewController ()
{
    UITextField *TF_mima;
}

@end

@implementation MimaRegisterViewController
-(void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    self.navigationController.navigationBarHidden=NO;
}
- (void)viewDidLoad {
    [super viewDidLoad];
    self.title = @"注册";
    self.automaticallyAdjustsScrollViewInsets = NO;
    TF_mima =[[UITextField alloc]initWithFrame:CGRectMake(15, 70, DEVICE_WIDTH-30, 40)];
    [self.view addSubview:TF_mima];
    TF_mima.borderStyle = UITextBorderStyleRoundedRect;
    TF_mima.placeholder = @"请输入密码";
    TF_mima.secureTextEntry=YES;
    [TF_mima becomeFirstResponder];
    UILabel *tlabel =[[UILabel alloc]initWithFrame:CGRectMake(15, 120, DEVICE_WIDTH-30, 30)];
    
    [self.view addSubview:tlabel];
    tlabel.textColor =[UIColor redColor];
    tlabel.textAlignment = NSTextAlignmentCenter;
    tlabel.text = @"密码最少8位数，最多18位数";
    tlabel.font = [UIFont systemFontOfSize:15];
    UIButton *zhuce_B =[UIButton buttonWithType:UIButtonTypeSystem];
    zhuce_B.frame = CGRectMake(15, 170, DEVICE_WIDTH-30, 50);
    [self.view addSubview:zhuce_B];
    [zhuce_B setTitle:@"注 册" forState:UIControlStateNormal];
    [zhuce_B setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
    [zhuce_B setBackgroundColor:YQDCOLOR];
    zhuce_B.titleLabel.font =[UIFont systemFontOfSize:25];
    [zhuce_B addTarget:self action:@selector(zhuceClcik) forControlEvents:UIControlEventTouchUpInside];
    zhuce_B.layer.masksToBounds = YES;
    zhuce_B.layer.cornerRadius = 6;
    
    UILabel *tlabel1 = [[UILabel alloc]initWithFrame:CGRectMake(15, 240, DEVICE_WIDTH-30, 15)];
    [self.view addSubview:tlabel1];
    tlabel1.text = @"注册表示你同意易企点服务使用协议和隐私条款";
    tlabel1.font = [UIFont systemFontOfSize:12];
    tlabel1.textColor = [UIColor redColor];
    tlabel1.textAlignment = NSTextAlignmentCenter;
    
    UIButton *tbtn1 =[UIButton buttonWithType:UIButtonTypeSystem];
    [tbtn1 setTitle:@"易企点服务使用协议" forState:UIControlStateNormal];
    tbtn1.frame = CGRectMake(15, DEVICE_HEIGHT-30, 120, 15);
    [self.view addSubview:tbtn1];
    [tbtn1 addTarget:self action:@selector(fuwuClick) forControlEvents:UIControlEventTouchUpInside];
    tbtn1.titleLabel.font = [UIFont systemFontOfSize:12];
    
    UIButton *tbtn2 =[UIButton buttonWithType:UIButtonTypeSystem];
    [tbtn2 setTitle:@"隐私条款" forState:UIControlStateNormal];
    tbtn2.frame = CGRectMake(DEVICE_WIDTH-75, DEVICE_HEIGHT-30, 60, 15);
    [self.view addSubview:tbtn2];
    [tbtn2 addTarget:self action:@selector(yinsiClick) forControlEvents:UIControlEventTouchUpInside];
    tbtn2.titleLabel.font = [UIFont systemFontOfSize:12];
    
    
}
-(void)yinsiClick{
    NSLog(@"隐私协议");
}
-(void)fuwuClick{
    NSLog(@"服务协议");
}

-(void)zhuceClcik{
    NSLog(@"注册");
    [self.view endEditing:YES];
    if(TF_mima.text.length>7 && TF_mima.text.length<19)
    {
        
        MBProgressHUD *hud = [MBProgressHUD showHUDAddedTo:self.view animated:YES];
        hud.mode = MBProgressHUDModeAnnularDeterminate;
        hud.label.text = @"正在注册";
        
        [WebRequest user_loginWithu1:self.phoneNumber u2:TF_mima.text  And:^(NSDictionary *dic) {
            [hud hideAnimated:YES];
            NSString *msg = dic[@"msg"];
            MBFadeAlertView *alert = [[MBFadeAlertView alloc]init];
            [alert showAlertWith:msg];
            dispatch_async(dispatch_get_main_queue(), ^{
                [self.navigationController popToViewController:self.navigationController.viewControllers[0] animated:NO];
            });
        }];
        
       
        
    }
    
    else
    {
        MBFadeAlertView  *alert =[[MBFadeAlertView alloc]init];
        [alert showAlertWith:@"密码最少8位数，最多18位数"];
    }
    
}

@end
