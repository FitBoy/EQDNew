//
//  MyDangAn1ViewController.m
//  YiQiDian
//
//  Created by 梁新帅 on 2017/3/9.
//  Copyright © 2017年 FitBoy. All rights reserved.
//

#import "MyDangAn1ViewController.h"
#import "WebRequest.h"
#import "GeRenView.h"
#import "AuthenModel.h"
#import "FBTextFieldViewController.h"
#import "FBOptionViewController.h"
#import "FBTextVViewController.h"
#import "FLvLiViewController.h"
#import "TrueBrthdayViewController.h"
#import "FBOptionViewController.h"
#import "FBAddressViewController.h"
#import <RongIMKit/RongIMKit.h>
#import <UIButton+AFNetworking.h>
#import "DAEngllishViewController.h"
@interface MyDangAn1ViewController ()<UITableViewDelegate,UITableViewDataSource,UINavigationControllerDelegate, UIImagePickerControllerDelegate,FBTextFieldViewControllerDelegate,FBOptionViewControllerDelegate,FBTextVViewControllerDelegate,TrueBrthdayViewControllerDelegate,FBOptionViewControllerDelegate,FBAddressViewControllerDelegate,DAEngllishViewControllerDelegate>
{
    UITableView *tableV;
    NSMutableArray *arr_big;
    NSMutableArray *arr_bigcontent;
    NSMutableArray *arr_title;
    GeRenView *GRV;
    UserModel *user;
    NSMutableDictionary *dic2;
    NSInteger flag;
}
@property (nonatomic,strong) UIView *V_gongkai;

@end
@implementation MyDangAn1ViewController
-(void)viewWillAppear:(BOOL)animated{
    [super viewWillAppear:animated];
    self.navigationController.navigationBarHidden=NO;
    [self loadRequestData];
}
-(void)loadRequestData{
    NSString  *uid =[USERDEFAULTS objectForKey:Y_Zhanghao];
    
    
    [WebRequest Com_SelectStaffInfoWithuid:uid pass:[USERDEFAULTS objectForKey:Y_MIMA] And:^(NSDictionary *dic) {
        
        NSArray *arr = dic[Y_ITEMS];
        if (arr.count) {
            dic2 =[NSMutableDictionary dictionaryWithDictionary:arr[0]];
            flag=1;
            dispatch_async(dispatch_get_main_queue(), ^{
                [GRV.B_headimg setBackgroundImageForState:UIControlStateNormal withURL:[NSURL URLWithString:[NSString stringWithFormat:@"%@%@",HTTP_PATH,dic2[@"iphoto"]]] placeholderImage:[UIImage imageNamed:@"no_login_head"]];
                [tableV reloadData];
            });
           
        }
    }];
    
}
- (void)viewDidLoad {
    [super viewDidLoad];
    flag =0;
    self.navigationItem.title =@"个人档案";
    self.view.layer.backgroundColor =[UIColor whiteColor].CGColor;
    arr_title =[NSMutableArray arrayWithArray:@[@"个人基本信息",@"联系方式",@"学历与技能",@"工作履历"]];
    arr_big =[NSMutableArray arrayWithCapacity:0];
    
    NSMutableArray *arr_one =[NSMutableArray arrayWithArray:@[@"姓名",@"性别",@"民族",@"出生日期",@"生日",@"身份证号",@"户口性质",@"户籍地址",@"现住址",@"婚配",@"生肖",@"身高(cm)",@"体重(kg)",@"血型",@"宗教信仰",@"政治面貌",@"兴趣爱好"]];
    arr_bigcontent =[NSMutableArray arrayWithCapacity:0];
    NSMutableArray *arr_onecontents =[NSMutableArray arrayWithArray:@[@"name",@"sex",@"nation",@"date",@"rdate",@"idnum",@"housetype",@"housead",@"padress",@"marry",@"czodia",@"heigh",@"weigh",@"blood",@"belief",@"politicstate",@"interests"]];
    NSMutableArray *arr_twocontents =[NSMutableArray arrayWithArray:@[@"ptel",@"qq",@"wchat",@"email",@"contactname",@"contactrelat",@"contacttel"]];
    NSMutableArray *arr_threecontents =[NSMutableArray arrayWithArray:@[@"grad",@"major",@"edu",@"pskill",@"foreighclass"]];
    [arr_bigcontent addObject:arr_onecontents];
    [arr_bigcontent addObject:arr_twocontents];
    [arr_bigcontent addObject:arr_threecontents];

    NSMutableArray *arr_two = [NSMutableArray arrayWithArray:@[@"个人电话",@"QQ",@"微信",@"邮箱",@"紧急联系人",@"与紧急联系人的关系",@"紧急联系人电话"]];
    
    
    NSMutableArray *arr_three =[NSMutableArray arrayWithArray:@[@"毕业院校",@"专业",@"文化程度",@"职业资格",@"外语等级"]];
   
    
    NSMutableArray *arr_four =[NSMutableArray arrayWithArray:@[@" + 新增履历"]];
    NSMutableArray *arr_fourcontents =[NSMutableArray arrayWithCapacity:0];
    
    [arr_bigcontent addObject:arr_fourcontents];
    
    
    
    [arr_big addObject:arr_one];
    [arr_big addObject:arr_two];
    [arr_big addObject:arr_three];
    [arr_big addObject:arr_four];
    tableV = [[UITableView alloc]initWithFrame:CGRectMake(0, 0, DEVICE_WIDTH, DEVICE_HEIGHT) style:UITableViewStyleGrouped];
    tableV.delegate=self;
    tableV.dataSource=self;
    [self.view addSubview:tableV];
    tableV.rowHeight=50;
   GRV =[[GeRenView alloc]init];
    GRV.frame =CGRectMake(0, 0, DEVICE_WIDTH, 155);
    tableV.tableHeaderView =GRV;
   GRV.L_content.text =@"工号：";
    [GRV.B_headimg addTarget:self action:@selector(zhengjianzhaoClick) forControlEvents:UIControlEventTouchUpInside];
    
    
}
-(void)zhengjianzhaoClick
{
    UIImagePickerController *pickerC =[[UIImagePickerController alloc]init];
    pickerC.allowsEditing=YES;
    pickerC.delegate =self;
    UIAlertController *alert =[[UIAlertController alloc]init];
    [alert addAction:[UIAlertAction actionWithTitle:@"相册" style:UIAlertActionStyleDefault handler:^(UIAlertAction * _Nonnull action) {
        if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypePhotoLibrary]) {
            pickerC.sourceType =UIImagePickerControllerSourceTypePhotoLibrary;
            [self presentViewController:pickerC animated:NO completion:nil];
            
        }
        else
        {
            MBProgressHUD *hud=[MBProgressHUD showHUDAddedTo:self.view.window animated:YES];
            hud.mode = MBProgressHUDModeText;
            hud.label.text =@"拒绝了访问相册";
            dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, 1 * NSEC_PER_SEC);
            dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
                [MBProgressHUD hideHUDForView:self.view.window animated:YES];
            });
        }
        
    }]];
    [alert addAction:[UIAlertAction actionWithTitle:@"相机" style:UIAlertActionStyleDefault handler:^(UIAlertAction * _Nonnull action) {
        if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera]) {
            pickerC.sourceType =UIImagePickerControllerSourceTypeCamera;
            [self presentViewController:pickerC animated:NO completion:nil];
            
        }
        else
        {
            MBProgressHUD *hud=[MBProgressHUD showHUDAddedTo:self.view.window animated:YES];
            hud.mode = MBProgressHUDModeText;
            hud.label.text =@"拒绝了访问相机";
            dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, 1 * NSEC_PER_SEC);
            dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
                [MBProgressHUD hideHUDForView:self.view.window animated:YES];
            });
        }
        
        
    }]];
    [alert addAction:[UIAlertAction actionWithTitle:@"取消" style:UIAlertActionStyleCancel handler:^(UIAlertAction * _Nonnull action) {
        
    }]];
    [self presentViewController:alert animated:NO completion:nil];
    
}
-(UIView*)V_gongkai
{
    if (!_V_gongkai) {
        //是否公开
        _V_gongkai = [[UIView alloc]initWithFrame:CGRectMake(DEVICE_WIDTH-160, 0, 130, 50)];
        _V_gongkai.userInteractionEnabled=YES;
        UISwitch  *tswith = [[UISwitch alloc]initWithFrame:CGRectMake(60, 10, 70, 30)];
        [tswith addTarget:self action:@selector(switchClick) forControlEvents:UIControlEventValueChanged];
        [_V_gongkai addSubview:tswith];
        UILabel *tlabel = [[UILabel alloc]initWithFrame:CGRectMake(0, 10, 60, 30)];
        tlabel.text =@"公开：";
        tlabel.font =[UIFont systemFontOfSize:17];
        [_V_gongkai addSubview:tlabel];
        tlabel.textAlignment = NSTextAlignmentRight;
    }
    return _V_gongkai;
}

-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary<NSString *,id> *)info
{
    UIImage *image =[info objectForKey:UIImagePickerControllerEditedImage];
    [GRV.B_headimg setBackgroundImage:image forState:UIControlStateNormal];
    [self dismissViewControllerAnimated:NO completion:nil];
    
}

#pragma  mark - 表的数据源
-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return arr_big.count;
}
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    NSArray *arr =arr_big[section];
    return arr.count;
}
-(UITableViewCell*)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    if (indexPath.section<3) {
        static NSString *cellId=@"cellID";
        UITableViewCell *cell =[tableView dequeueReusableCellWithIdentifier:cellId];
        if (!cell) {
            cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:cellId];
            cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
            cell.textLabel.font = [UIFont systemFontOfSize:18];
        }
        NSArray *arr =arr_big[indexPath.section];
        if (indexPath.section==0) {
            if (indexPath.row<6 ||indexPath.row==7 ) {
                cell.accessoryType =UITableViewCellAccessoryNone;
                cell.selectionStyle =UITableViewCellSelectionStyleNone;
            }
        }
        else
        {
            cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
        }
        if (flag==1) {
            if(indexPath.section<3)
            {
                NSArray *arr1 =arr_bigcontent[indexPath.section];
                cell.detailTextLabel.text =[NSString stringWithFormat:@"%@",dic2[arr1[indexPath.row]]];
                if (indexPath.section==0 ) {
                    if (indexPath.row==1 ) {
                        //性别
                        if([arr1[indexPath.row] integerValue]==0)
                        {
                            cell.detailTextLabel.text = @"男";
                        }
                        else
                        {
                            cell.detailTextLabel.text = @"女";
                        }
                    }
                }
            }
            else
            {
                cell.detailTextLabel.text=nil;
                
            }
        }
        
        cell.textLabel.text =arr[indexPath.row];
        return cell;
    }
   
    else
    {
        //工作履历
        static NSString *cellId=@"cellID1";
        UITableViewCell *cell1 =[tableView dequeueReusableCellWithIdentifier:cellId];
        if (!cell1) {
            cell1 = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:cellId];
            cell1.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
        }

        
        if(indexPath.row==0)
        {
        [cell1 addSubview:self.V_gongkai];
            cell1.textLabel.text =arr_big[indexPath.section][indexPath.row];
            cell1.textLabel.font = [UIFont systemFontOfSize:18];
        }
        else
        {
            
        }
        return cell1;
    }

}

-(void)switchClick
{
    //控制工作履历是否公开
    
}

-(UIView*)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
    UILabel *tlabel =[[UILabel alloc]init];
    tlabel.text =arr_title[section];
    tlabel.textColor=[UIColor whiteColor];
    tlabel.font =[UIFont systemFontOfSize:24];
    tlabel.backgroundColor =EQDCOLOR;
    return tlabel;
    
}
-(CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section
{
    return 30;
}
#pragma  mark - 表的协议代理
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSArray *arr =arr_big[indexPath.section];
    NSArray *arr2 =arr_bigcontent[indexPath.section];
    if (indexPath.section==0) {
//        if (indexPath.row==4) {
//            //生日
//            TrueBrthdayViewController *Tvc =[[TrueBrthdayViewController alloc]init];
//            Tvc.delegate =self;
//            Tvc.indexpath =indexPath;
//            Tvc.content = arr[indexPath.row];
//            [self.navigationController pushViewController:Tvc animated:NO];
//            
//        }
        if (indexPath.row==6) {
            //户口性质
            FBOptionViewController *Ovc =[[FBOptionViewController alloc]init];
            Ovc.indexPath=indexPath;
            Ovc.delegate=self;
            Ovc.option=2;
            Ovc.contentTitle =arr[indexPath.row];
            [self.navigationController pushViewController:Ovc animated:NO];
        }
          else if(indexPath.row==7){
              FBTextVViewController *Tvc =[[FBTextVViewController alloc]init];
              Tvc.content =dic2[arr2[indexPath.row]];
              [self.navigationController pushViewController:Tvc animated:NO];
              
          }
        else if(indexPath.row==8){
            //现住址
            FBAddressViewController *ADvc =[[FBAddressViewController alloc]init];
            ADvc.delegate =self;
            ADvc.indexPath=indexPath;
            [self.navigationController pushViewController:ADvc animated:NO];
        }
        else if(indexPath.row==9)
        {
            //婚配
            FBOptionViewController *Ovc =[[FBOptionViewController alloc]init];
            Ovc.indexPath=indexPath;
            Ovc.delegate=self;
            Ovc.option=3;
            Ovc.contentTitle =arr[indexPath.row];
            [self.navigationController pushViewController:Ovc animated:NO];
            
        }
        else if(indexPath.row==10){
            //生肖
            FBOptionViewController *ovc =[[FBOptionViewController alloc]init];
            ovc.indexPath=indexPath;
            ovc.delegate =self;
            ovc.option=20;
            ovc.contentTitle =arr[indexPath.row];
            [self.navigationController pushViewController:ovc animated:NO];
            
        }
        else if(indexPath.row ==11|| indexPath.row ==12)
        {
            
            //身高 体重
            FBTextFieldViewController *TFvc =[[FBTextFieldViewController alloc]init];
            TFvc.delegate =self;
            TFvc.indexPath =indexPath;
            TFvc.content = [NSString stringWithFormat:@"%@",dic2[arr2[indexPath.row]]];
            TFvc.contentTitle =arr[indexPath.row];
            [self.navigationController pushViewController:TFvc animated:NO];
            
        }
        else if(indexPath.row==14)
        {
            //宗教信仰
            UIAlertController *alert = [[UIAlertController alloc]init];
           [alert addAction:[UIAlertAction actionWithTitle:@"无" style:UIAlertActionStyleDefault handler:^(UIAlertAction * _Nonnull action) {
               [self xiugaiWithcongtent:action.title indexpath:indexPath];
           }]];
            [alert addAction:[UIAlertAction actionWithTitle:@"基督教" style:UIAlertActionStyleDefault handler:^(UIAlertAction * _Nonnull action) {
                 [self xiugaiWithcongtent:action.title indexpath:indexPath];
            }]];
            [alert addAction:[UIAlertAction actionWithTitle:@"天主教" style:UIAlertActionStyleDefault handler:^(UIAlertAction * _Nonnull action) {
                 [self xiugaiWithcongtent:action.title indexpath:indexPath];
            }]];
            [alert addAction:[UIAlertAction actionWithTitle:@"伊斯兰教" style:UIAlertActionStyleDefault handler:^(UIAlertAction * _Nonnull action) {
                 [self xiugaiWithcongtent:action.title indexpath:indexPath];
            }]];
            [alert addAction:[UIAlertAction actionWithTitle:@"佛教" style:UIAlertActionStyleDefault handler:^(UIAlertAction * _Nonnull action) {
                 [self xiugaiWithcongtent:action.title indexpath:indexPath];
            }]];
            [alert addAction:[UIAlertAction actionWithTitle:@"道教" style:UIAlertActionStyleDefault handler:^(UIAlertAction * _Nonnull action) {
                 [self xiugaiWithcongtent:action.title indexpath:indexPath];
            }]];
            [alert addAction:[UIAlertAction actionWithTitle:@"犹太教" style:UIAlertActionStyleDefault handler:^(UIAlertAction * _Nonnull action) {
                 [self xiugaiWithcongtent:action.title indexpath:indexPath];
            }]];
            [alert addAction:[UIAlertAction actionWithTitle:@"其他" style:UIAlertActionStyleDefault handler:^(UIAlertAction * _Nonnull action) {
                 [self xiugaiWithcongtent:action.title indexpath:indexPath];
            }]];
            
            [self presentViewController:alert animated:NO completion:nil];
            
            
        }
        
        else if(indexPath.row==13)
        {
            //血型
            UIAlertController *alert =[[UIAlertController alloc]init];
            [alert addAction:[UIAlertAction actionWithTitle:@"A" style:UIAlertActionStyleDefault handler:^(UIAlertAction * _Nonnull action) {
                [self xiugaiWithcongtent:action.title indexpath:indexPath];
            }]];
            [alert addAction:[UIAlertAction actionWithTitle:@"B" style:UIAlertActionStyleDefault handler:^(UIAlertAction * _Nonnull action) {
                 [self xiugaiWithcongtent:action.title indexpath:indexPath];
            }]];
            [alert addAction:[UIAlertAction actionWithTitle:@"AB" style:UIAlertActionStyleDefault handler:^(UIAlertAction * _Nonnull action) {
                 [self xiugaiWithcongtent:action.title indexpath:indexPath];
            }]];
            [alert addAction:[UIAlertAction actionWithTitle:@"O" style:UIAlertActionStyleDefault handler:^(UIAlertAction * _Nonnull action) {
                 [self xiugaiWithcongtent:action.title indexpath:indexPath];
            }]];
            [self presentViewController:alert animated:NO completion:nil];
            
        }
        else if(indexPath.row ==15)
        {
            //政治面貌
            FBOptionViewController *ovc =[[FBOptionViewController alloc]init];
            ovc.indexPath=indexPath;
            ovc.delegate =self;
            ovc.option=4;
            ovc.contentTitle =arr[indexPath.row];
            [self.navigationController pushViewController:ovc animated:NO];
        }
       else if(indexPath.row ==16)
       {
           //兴趣爱好
           FBTextVViewController *Tvc =[[FBTextVViewController alloc]init];
           Tvc.delegate =self;
           Tvc.contentTitle =arr[indexPath.row];
           Tvc.content = dic2[arr2[indexPath.row]];
           Tvc.indexpath =indexPath;
           [self.navigationController pushViewController:Tvc animated:NO];
           
       }
        else
        {
            
        }
    
    }
   
    else if (indexPath.section==1)
    {
        
        if (indexPath.row==5) {
            //与紧急联系人的关系
            UIAlertController *alert = [[UIAlertController alloc]init];
            [alert addAction:[UIAlertAction actionWithTitle:@"父母" style:UIAlertActionStyleDefault handler:^(UIAlertAction * _Nonnull action) {
                [self xiugaiWithcongtent:action.title indexpath:indexPath];
                
            }]];
            [alert addAction:[UIAlertAction actionWithTitle:@"夫妻" style:UIAlertActionStyleDefault handler:^(UIAlertAction * _Nonnull action) {
                 [self xiugaiWithcongtent:action.title indexpath:indexPath];
            }]];
            [alert addAction:[UIAlertAction actionWithTitle:@"子女" style:UIAlertActionStyleDefault handler:^(UIAlertAction * _Nonnull action) {
                 [self xiugaiWithcongtent:action.title indexpath:indexPath];
            }]];
            [alert addAction:[UIAlertAction actionWithTitle:@"兄妹" style:UIAlertActionStyleDefault handler:^(UIAlertAction * _Nonnull action) {
                 [self xiugaiWithcongtent:action.title indexpath:indexPath];
            }]];
            [alert addAction:[UIAlertAction actionWithTitle:@"亲戚" style:UIAlertActionStyleDefault handler:^(UIAlertAction * _Nonnull action) {
                 [self xiugaiWithcongtent:action.title indexpath:indexPath];
            }]];
            [self presentViewController:alert animated:NO completion:nil];
            
        }
        else
        {
        FBTextFieldViewController *TFvc =[[FBTextFieldViewController alloc]init];
        TFvc.delegate =self;
        TFvc.content =dic2[arr2[indexPath.row]];
        TFvc.contentTitle =arr[indexPath.row];
        TFvc.indexPath =indexPath;
        [self.navigationController pushViewController:TFvc animated:NO];
        }
        
    }
   else if(indexPath.section==2)
   {
       if(indexPath.row==0 || indexPath.row==1)
       {
           //毕业院校 专业
           FBTextFieldViewController *TFvc =[[FBTextFieldViewController alloc]init];
           TFvc.delegate =self;
           TFvc.content =dic2[arr2[indexPath.row]];
           TFvc.contentTitle =arr[indexPath.row];
           TFvc.indexPath =indexPath;
           [self.navigationController pushViewController:TFvc animated:NO];
           
       }
       else if(indexPath.row==2 || indexPath.row ==3)
       {
           //文化程度 职业资格
           FBOptionViewController *Ovc =[[FBOptionViewController alloc]init];
           Ovc.indexPath =indexPath;
           Ovc.delegate =self;
           Ovc.option =indexPath.row+3;
           Ovc.contentTitle =arr[indexPath.row];
           [self.navigationController pushViewController:Ovc animated:NO];
           
       }
       else
       {
           //外语等级
           DAEngllishViewController *Evc =[[DAEngllishViewController alloc]init];
           Evc.delegate =self;
           Evc.indexPath =indexPath;
           [self.navigationController pushViewController:Evc animated:NO];
           
           
       }
   }
    else
    {
        //工作履历
        FLvLiViewController *LVvc =[[FLvLiViewController alloc]init];
        [self.navigationController pushViewController:LVvc animated:NO];
        
    }
    
}

#pragma  mark--  自定义的协议代理
-(void)birthDayWithcontent:(NSString *)content indexPath:(NSIndexPath *)indexpath
{
    
    
}
-(void)textVtext:(NSString *)text indexPath:(NSIndexPath *)indexPath
{
    [self xiugaiWithcongtent:text indexpath:indexPath];
    
}
-(void)address:(NSString *)address Withindexpath:(NSIndexPath *)indexPath
{
    [self xiugaiWithcongtent:address indexpath:indexPath];
    
}
-(void)content:(NSString *)content WithindexPath:(NSIndexPath *)indexPath
{
   //textFiled
    
    if (indexPath.section==0) {
        if (indexPath.row==11 || indexPath.row==12) {
            if (content.length>1 && content.length<4) {
                [self xiugaiWithcongtent:content indexpath:indexPath];
            }
            else
            {
                MBProgressHUD *hud=[MBProgressHUD showHUDAddedTo:self.view  animated:YES];
                hud.mode = MBProgressHUDModeText;
                hud.label.text =@"必须是2-3位数";
                dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, 1 * NSEC_PER_SEC);
                dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
                    [MBProgressHUD hideHUDForView:self.view  animated:YES];
                });
            }
        }
        else
        {
            [self xiugaiWithcongtent:content indexpath:indexPath];
            
        }
    }
    
    
    if (indexPath.section==1) {
        if (indexPath.row==0 || indexPath.row==6) {
            //个人电话
           if( [RCKitUtility validateCellPhoneNumber:content])
           {
              [self xiugaiWithcongtent:content indexpath:indexPath];
           }
            else
            {
                MBProgressHUD *hud=[MBProgressHUD showHUDAddedTo:self.view  animated:YES];
                hud.mode = MBProgressHUDModeText;
                hud.label.text =@"手机号格式不正确";
                dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, 1 * NSEC_PER_SEC);
                dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
                    [MBProgressHUD hideHUDForView:self.view  animated:YES];
                });
            }
        }
        
        else if(indexPath.row==1)
        {
            //qq
            if ([self  isPureNumandCharacters:content]) {
                if (content.length > 4 && content.length <15) {
                    [self xiugaiWithcongtent:content indexpath:indexPath];
                }
                else
                {
                    MBProgressHUD *hud=[MBProgressHUD showHUDAddedTo:self.view  animated:YES];
                    hud.mode = MBProgressHUDModeText;
                    hud.label.text =@"qq的 位数5--14";
                    dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, 1 * NSEC_PER_SEC);
                    dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
                        [MBProgressHUD hideHUDForView:self.view  animated:YES];
                    });
                }
            }
            else
            {
                MBProgressHUD *hud=[MBProgressHUD showHUDAddedTo:self.view  animated:YES];
                hud.mode = MBProgressHUDModeText;
                hud.label.text =@"输入的qq不合法";
                dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, 1 * NSEC_PER_SEC);
                dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
                    [MBProgressHUD hideHUDForView:self.view  animated:YES];
                });
            }
            
        }
        else if(indexPath.row==3)
        {
            //邮箱
            if ( [RCKitUtility  validateEmail:content]) {
                [self xiugaiWithcongtent:content indexpath:indexPath];
            }
            else
            {
                MBProgressHUD *hud=[MBProgressHUD showHUDAddedTo:self.view  animated:YES];
                hud.mode = MBProgressHUDModeText;
                hud.label.text =@"邮箱格式不正确";
                dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, 1 * NSEC_PER_SEC);
                dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
                    [MBProgressHUD hideHUDForView:self.view  animated:YES];
                });
            }
        }
        else
        {
           [self xiugaiWithcongtent:content indexpath:indexPath];
        }
    }
    else
    {
       [self xiugaiWithcongtent:content indexpath:indexPath];
    }
    
    
    
}

///判断字符串是否是数字
- (BOOL)isPureNumandCharacters:(NSString *)string
{
    string = [string stringByTrimmingCharactersInSet:[NSCharacterSet decimalDigitCharacterSet]];
    if(string.length > 0)
    {
        return NO;
    }
    return YES;
}
-(void)option:(NSString *)option indexPath:(NSIndexPath *)indexPath
{
    [self xiugaiWithcongtent:option indexpath:indexPath];
    
}

-(void)xiugaiWithcongtent:(NSString*)content indexpath:(NSIndexPath*)indexpath{
    NSArray *arr = arr_bigcontent[indexpath.section];
    [WebRequest Com_UpdateStaffInfoWithkey:arr[indexpath.row] value:content And:^(NSDictionary *dic) {
        if ([dic[Y_STATUS] integerValue]==200) {
            dispatch_async(dispatch_get_main_queue(), ^{
                MBProgressHUD *hud=[MBProgressHUD showHUDAddedTo:self.view  animated:YES];
                hud.mode = MBProgressHUDModeText;
                hud.label.text =@"修改成功";
                dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, 1 * NSEC_PER_SEC);
                dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
                    [MBProgressHUD hideHUDForView:self.view  animated:YES];
                });
                [dic2 setObject:content forKey:arr[indexpath.row]];
                
                [tableV reloadData];
            });
           
        }
        else
        {
            dispatch_async(dispatch_get_main_queue(), ^{
                MBProgressHUD *hud=[MBProgressHUD showHUDAddedTo:self.view  animated:YES];
                hud.mode = MBProgressHUDModeText;
                hud.label.text =@"未知错误";
                dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, 1 * NSEC_PER_SEC);
                dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
                    [MBProgressHUD hideHUDForView:self.view  animated:YES];
                });

            });
    }
        
    }];

}

-(void)english:(NSString *)english indexPath:(NSIndexPath *)indexpath
{
    [self xiugaiWithcongtent:english indexpath:indexpath];
}

@end
